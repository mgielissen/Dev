<openerp>
  <data>
    <record id="view_order_form_inherit" model="ir.ui.view">
      <field name="name">sale.order.form.inherit</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_form"/>
      <field name="arch" type="xml">
        <xpath expr="//tree[@string='Sales Order Lines']/field[@name='name']" position="after">
          <field name="links"/>
          <field name="rechts"/>
          <field name="boven"/>
          <field name="onder"/>
          <field name="hoogte" on_change="on_change_hoeveelheid_berekenen(hoogte,breedte,aantal)"/>
          <field name="breedte" on_change="on_change_hoeveelheid_berekenen(hoogte,breedte,aantal)"/>
          <field name="aantal" on_change="on_change_hoeveelheid_berekenen(hoogte,breedte,aantal)"/>
          <field name="barcode"/>
          <field name="boringen"/>
          <field name="opmerkingen"/>
        </xpath>
        <xpath expr="//group/field[@name='client_order_ref']" position="after">
          <field name="kleurenpicker"/>
          <field name="afwerkingpicker"/>
        </xpath>
      </field>
    </record>

    <record id="invoice_form_inherit" model="ir.ui.view">
      <field name="name">account.invoice.form.inherit8</field>
      <field name="model">account.invoice</field>
      <field name="inherit_id" ref="account.invoice_form"/>
      <field name="arch" type="xml">
        <xpath expr="//tree[@string='Invoice Lines']/field[@name='name']" position="after">
          <field name="links"/>
          <field name="rechts"/>
          <field name="boven"/>
          <field name="onder"/>
          <field name="hoogte" on_change="on_change_hoeveelheid_factuur_berekenen(hoogte,breedte,aantal)"/>
          <field name="breedte" on_change="on_change_hoeveelheid_factuur_berekenen(hoogte,breedte,aantal)"/>
          <field name="aantal" on_change="on_change_hoeveelheid_factuur_berekenen(hoogte,breedte,aantal)"/>
          <field name="barcode"/>
          <field name="boringen"/>
          <field name="opmerkingen"/>
        </xpath>
        <xpath expr="//group/field[@name='account_id']" position="after">
          <field name="kleurenpicker"/>
          <field name="afwerkingpicker"/>
        </xpath>
      </field>
    </record>

    <template id="cart_inherits" inherit_id="website_sale.cart" priority="1000">
      <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace"/>
      <xpath expr="//ul[contains(@class, 'wizard')]/li[2]" position="before">
        <li><a class="text-muted">Extra<span class="chevron"></span></a></li>
      </xpath>
      <xpath expr="//a[contains(@href, '/shop/checkout')]/span[1]" position="replace">
        <span>Next </span>
      </xpath>
      <xpath expr="//a[contains(@href, '/shop/checkout')]" position="attributes">
        <attribute name="href">/shop/extra</attribute>
      </xpath>
      <!-- remove +/- to update quantity -->
      <xpath expr="//div[contains(@class, 'input-group')]" position="replace">
        <div class="input-group">
          <input type="text" class="form-control js_quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty)" readonly="readonly" />
          <div class="input-group-addon"><i class='fa fa-times' onclick="javascript:$('input.js_quantity').val(0).change()" /></div>
        </div>
      </xpath>
    </template>

    <!-- disable +/- qty on product -->
    <record model="ir.ui.view" id="website_sale.product_quantity">
      <field name="active" eval="False"/>
    </record>

    <template id="products" inherit_id='website_sale.products' name="Products">
      <xpath expr="//t[@t-call='website_sale.search']" position="before">
        <t t-if="not request.website.sale_get_order() or not len(request.website.sale_get_order().order_line)">
          <a href="/shop/afwerking"><i class="fa fa-sliders"/> Change Afwerking</a>
        </t>
      </xpath>
    </template>

    <template id="product" inherit_id='website_sale.product' name="Product">
      <xpath expr="//a[@id='add_to_cart']" position="before">
        <div class="form-group row">
          <label for="hoogteWebshop" class="col-sm-4 control-label">Hoogte</label>
          <div class="col-sm-4">
            <input type="number" class="form-control" required="required" id="hoogteWebshop" name="hoogteWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="breedteWebshop" class="col-sm-4 control-label">Breedte</label>
          <div class="col-sm-4">
            <input type="number" class="form-control" required="required" id="breedteWebshop" name="breedteWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="linksWebshop" class="col-sm-4 control-label">Links</label>
          <div class="col-sm-4">
              <input type="checkbox" name="linksWebshop" id="linksWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="rechtsWebshop" class="col-sm-4 control-label">Rechts</label>
          <div class="col-sm-4">
              <input type="checkbox" name="rechtsWebshop" id="rechtsWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="bovenWebshop" class="col-sm-4 control-label">Boven</label>
          <div class="col-sm-4">
              <input type="checkbox" name="bovenWebshop" id="bovenWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="onderWebshop" class="col-sm-4 control-label">Onder</label>
          <div class="col-sm-4">
              <input type="checkbox" name="onderWebshop" id="onderWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="boringenWebshop" class="col-sm-4 control-label">Boringen</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="boringenWebshop" name="boringenWebshop" />
          </div>
        </div>
        <div class="form-group row">
          <label for="opmerkingenWebshop" class="col-sm-4 control-label">Opmerkingen</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="opmerkingenWebshop" name="opmerkingenWebshop" />
          </div>
        </div>
      </xpath>
    </template>

    <template id="checkout_inherits" inherit_id="website_sale.checkout">
      <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace"/>
      <xpath expr="//ul[contains(@class, 'wizard')]/li[2]" position="before">
        <li><a href="/shop/extra" class="text-success">Extra<span class="chevron"></span></a></li>
      </xpath>
    </template>

    <template id="confirmation_inherits" inherit_id="website_sale.confirmation">
      <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace"/>
      <xpath expr="//ul[contains(@class, 'wizard')]/li[2]" position="before">
        <li><a href="/shop/extra" class="text-success">Extra<span class="chevron"></span></a></li>
      </xpath>
    </template>

    <template id="categoryselection">
      <t t-call="website.layout">
        <div id="wrap">
          <div class="container oe_website_sale">
            <h1 class="mb32">Kies een categorie</h1>
            <div class="row">
              <form method="post" class="">
                <div class="row bg-info" style="padding:15px;margin-top:30px;border-radius:15px;">
                  <div class="form-inline form-group">
                    <label for="afwerking" class="h4">Type afwerking</label>
                    <br />
                    <select id="afwerking" name="afwerking" class="form-control">
                      <t t-set="curr_afwerking" t-value="int(request.session.get('aa_houbolak_afwerking', 0))" />
                      <t t-foreach="afwerkingen" t-as="afwerking">
                        <option t-att-value='afwerking.id'
                          t-att-selected="(curr_afwerking == afwerking.id) and 'selected' or False">
                          <span t-field="afwerking.name" />
                        </option>
                      </t>
                    </select>
                  </div>
                </div>
                <input type="submit" class='btn btn-primary pull-right' value='Bevestigen'/>
              </form>
            </div>
          </div>
        </div>
      </t>
    </template>

    <template id="extra">
      <t t-call="website.layout">
        <div id="wrap">
          <div class="container oe_website_sale">
            <ul class="wizard pull-right">
              <li><a href="/shop/cart" class="text-success">Review Order<span class="chevron"></span></a></li>
              <li class="text-primary">Extra<span class="chevron"></span></li>
              <li class="text-muted">Shipping &amp; Billing<span class="chevron"></span></li>
              <li class="text-muted">Confirmation<span class="chevron"></span></li>
            </ul>
            <h1 class="mb32">Extra info</h1>
            <div class="row">
              <form method="post" class="">
                <div class="row bg-info" style="padding:15px;margin-top:30px;border-radius:15px;">
                  <div class="form-inline form-group">
                    <label for="color" class="h4">Kleur producten</label>
                    <select id="color" name="color" class="form-control">
                      <t t-foreach="colors" t-as="color">
                        <option t-att-value='color.id'>
                          <span t-field="color.name" />
                        </option>
                      </t>
                    </select>
                  </div>
                </div>
                <input type="submit" class='btn btn-primary pull-right' value='Bevestigen'/>
              </form>
            </div>
          </div>
        </div>
      </t>
    </template>


    <!--Extra menu item sales -->
    <record id="action_color_picker" model="ir.actions.act_window">
      <field name="name">Kleuren</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">sale.order.colorpicker</field>
      <field name="view_type">form</field>
      <field name="view_id" ref=""/>
      <field name="view_mode">tree,form</field>
    </record>
    <menuitem id="menu_our_colors"
      action="action_color_picker" parent="base.menu_sales"
      sequence="14"/>
      <record id="view_kleuren_form" model="ir.ui.view">
        <field name="name">sale.order.colorpicker.form</field>
        <field name="model">sale.order.colorpicker</field>
        <field name="arch" type="xml">
          <form string="Onze kleuren">
           <group>
            <field name="name"/>
            <field name="website_publish"/>
          </group>
        </form>
      </field>
    </record>
    <record id="view_kleuren_tree" model="ir.ui.view">
      <field name="name">sale.order.colorpicker.tree</field>
      <field name="model">sale.order.colorpicker</field>
      <field name="arch" type="xml">
        <tree string="Onze kleuren">
          <field name="name"/>
          <field name="website_publish"/>
        </tree>
      </field>
    </record>

    <!--Extra menu item for finishing -->
    <record id="action_finishing_picker" model="ir.actions.act_window">
      <field name="name">Afwerking</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">sale.order.finishing</field>
      <field name="view_type">form</field>
      <field name="view_id" ref=""/>
      <field name="view_mode">tree,form</field>
    </record>
    <menuitem id="menu_our_finishing"
      action="action_finishing_picker" parent="base.menu_sales"
      sequence="14"/>
      <record id="view_kleuren_form" model="ir.ui.view">
        <field name="name">sale.order.finishing.form</field>
        <field name="model">sale.order.finishing</field>
        <field name="arch" type="xml">
          <form string="Onze afwerkingen">
           <group>
            <field name="name"/>
            <field name="website_publish"/>
          </group>
        </form>
      </field>
    </record>
    <record id="view_finishing_tree" model="ir.ui.view">
      <field name="name">sale.order.finishing.tree</field>
      <field name="model">sale.order.finishing</field>
      <field name="arch" type="xml">
        <tree string="Onze afwerkingen">
          <field name="name"/>
          <field name="website_publish"/>
        </tree>
      </field>
    </record>

    <!-- Inherit product view -->
    <record id="product.product_template_only_form_view_inherit" model="ir.ui.view">
      <field name="name">product.template.product.inherit</field>
      <field name="model">product.template</field>
      <field name="inherit_id" ref="product.product_template_only_form_view"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='description']" position="before">
          <group>
            <field name="afwerkingpickerProduct"/>
          </group>
        </xpath>
      </field>
    </record>

    <template id="assets_frontend" inherit_id="website.assets_frontend">
      <xpath  expr="." position="inside">
        <script type="text/javascript" src="/aa_houbolak/static/src/js/jquery.validate.js" />
        <script type="text/javascript" src="/aa_houbolak/static/src/js/additional-methods.js" />
        <script type="text/javascript" src="/aa_houbolak/static/src/js/houbolak.js"></script>
      </xpath>
    </template>
  </data>
</openerp>
