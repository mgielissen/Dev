<openerp>
    <data>
        <record id="sale.view_order_form_inherit" model="ir.ui.view">
            <field name="name">sale.order.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
              <xpath expr="//tree[@string='Sales Order Lines']/field[@name='name']" position="after">
                  <field name="links"/>
                  <field name="rechts"/>
                  <field name="boven"/>
                  <field name="onder"/>
                  <field name="hoogte" on_change="on_change_hoeveelheid_berekenen(hoogte,breedte,aantal)"/>
                  <field name="breedte" on_change="on_change_hoeveelheid_berekenen(hoogte,breedte,aantal)"/>
                  <field name="aantal" on_change="on_change_hoeveelheid_berekenen(hoogte,breedte,aantal)"/>
                  <field name="barcode"/>
                  <field name="boringen"/>
                  <field name="opmerkingen"/>
              </xpath>
              <xpath expr="//group/field[@name='client_order_ref']" position="after">
                  <field name="kleurenpicker"/>
		  <field name="afwerkingpicker"/>
              </xpath>
            </field>
        </record>

        <record id="account.invoice_form_inherit90" model="ir.ui.view">
            <field name="name">account.invoice.form.inherit8</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="arch" type="xml">
              <xpath expr="//tree[@string='Invoice Lines']/field[@name='name']" position="after">
                <field name="links"/>
                <field name="rechts"/>
                <field name="boven"/>
                <field name="onder"/>
                <field name="hoogte" on_change="on_change_hoeveelheid_factuur_berekenen(hoogte,breedte,aantal)"/>
                <field name="breedte" on_change="on_change_hoeveelheid_factuur_berekenen(hoogte,breedte,aantal)"/>
                <field name="aantal" on_change="on_change_hoeveelheid_factuur_berekenen(hoogte,breedte,aantal)"/>
                <field name="barcode"/>
                <field name="boringen"/>
                <field name="opmerkingen"/>
              </xpath>
              <xpath expr="//group/field[@name='account_id']" position="after">
                  <field name="kleurenpicker"/>
		  <field name="afwerkingpicker"/>
              </xpath>
            </field>
        </record>

        <template id="cart_inherits" inherit_id="website_sale.cart">
            <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace">
              <li><a class="text-muted">Extra<span class="chevron"></span></a></li>
            </xpath>
            <!-- remove +/- to update quantity -->
            <xpath expr="//div[contains(@class, 'input-group')]" position="replace">
              <b><t t-esc="int(line.product_uom_qty)"/></b>
            </xpath>
        </template>

        <!-- disable +/- qty on product -->
        <record model="ir.ui.view" id="website_sale.product_quantity">
          <field name="active" eval="False"/>
        </record>

        <!-- force user to have only 1 quantity of a product in the cart -->
        <template id="product" inherit_id='website_sale.product' name="Product">
              <xpath expr="//a[@id='add_to_cart']" position="before">
                  <input type="hidden" name="set_qty" value="1"/>
              </xpath>
        </template>

        <template id="checkout_inherits" inherit_id="website_sale.checkout">
            <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace">
              <li><a class="text-muted">Extra<span class="chevron"></span></a></li>
            </xpath>
        </template>

        <template id="payment_inherits" inherit_id="website_sale.payment">
            <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace">
              <li><a href="/shop/extra" class="text-success">Extra<span class="chevron"></span></a></li>
            </xpath>
        </template>

        <template id="confirmation_inherits" inherit_id="website_sale.confirmation">
            <xpath expr="//ul[contains(@class, 'wizard')]/li[3]" position="replace">
              <li><a href="/shop/extra" class="text-success">Extra<span class="chevron"></span></a></li>
            </xpath>
        </template>
         
        <template id="final_step">
            <t t-call="website.layout">
              <t t-set="additional_title">Shop - Thank you</t>
              <div id="wrap">
                <div class="container oe_website_sale">

                  <ul class="wizard pull-right">
                      <li class="text-muted">Review Order<span class="chevron"/></li>
                      <li class="text-muted">Shipping &amp; Billing<span class="chevron"/></li>
                      <li class="text-primary">Confirmation<span class="chevron"/></li>
                  </ul>
                  <h1 class="mb32">Order <em t-field="order.name"/> bevestigd</h1>
                  <div class="row">
                      <div class="col-md-8 oe_cart">
                          <h2>Bedankt voor uw order!</h2>
                          <div class="clearfix"/>
                          <div class="oe_structure"/>
                      </div>
                      <div class="col-md-3 col-md-offset-1 text-muted" id="right_column">
                        <h4>Bill To:</h4>
                        <div t-field="order.partner_invoice_id" t-field-options="{
                          &quot;widget&quot;: &quot;contact&quot;,
                          &quot;fields&quot;: [
                            &quot;address&quot;,
                            &quot;name&quot;,
                            &quot;phone&quot;,
                            &quot;email&quot;
                          ]
                        }"/>
                        <t>
                            <h4 class="mt32">Ship To:</h4>
                            <t t-if="order.partner_shipping_id and order.partner_shipping_id.id != order.partner_invoice_id.id">
                              <div t-field="order.partner_shipping_id" t-field-options="{                         &quot;widget&quot;: &quot;contact&quot;,                         &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;]                         }"/>
                            </t>
                            <address t-if="order.partner_shipping_id.id == order.partner_invoice_id.id">Ship to the same address</address>
                        </t>
                      </div>
                  </div>

                </div>
                <div class="oe_structure"/>
              </div>

            </t>
        </template>
                
        <template id="extra">
            <t t-call="website.layout">
              <div id="wrap">
                <div class="container oe_website_sale">
                  <ul class="wizard pull-right">
                      <li><a href="/shop/cart" class="text-success">Review Order<span class="chevron"></span></a></li>
                      <li><a href="/shop/checkout" class="text-success">Shipping &amp; Billing<span class="chevron"></span></a></li>
                      <li class="text-primary">Extra<span class="chevron"></span></li>
                      <li class="text-muted">Confirmation<span class="chevron"></span></li>
                  </ul>
                  <h1 class="mb32">Extra info</h1>
                  <div class="row">
                    <form method="post" class="">
                        <div class="row bg-info" style="padding:15px;margin-top:30px;border-radius:15px;">
                          <div class="form-inline form-group">
                            <label for="color" class="h4">Kleur producten</label>
                            <select id="color" name="color" class="form-control">
                              <t t-foreach="colors" t-as="color">
                                <option t-att-value='color.id'>
                                  <span t-field="color.name" />
                                </option>
                              </t>
                            </select>
                          </div>
                        </div>

                        <div t-foreach="order.order_line" t-as="line" class="row bg-info" style="padding:15px;margin-top:30px;border-radius:15px;">
                            <div class="col-xs-6" style="width:30% !important;">
                                <h4 t-esc="line.product_id.name"/>
                                <br/>
                                <span t-field="line.product_id.image_medium"
                                        t-field-options='{"widget": "image", "class": "img-rounded"}'/>

                            </div>
                            <div class="col-xs-6" style="width:70% !important;">
                              <div class="form-group">
                                <table>
                                    <tr style="text-align:center;">
                                        <td style="width:15%;">Hoogte</td>
                                        <td style="width:9%;">Breedte</td>
                                        <td style="width:9%;">Links</td>
                                        <td style="width:9%;">Rechts</td>
                                        <td style="width:9%;">Boven</td>
                                        <td style="width:9%;">Onder</td>
                                        <td style="width:15%;">Boringen</td>
                                        <td style="width:20%;">Opmerkingen</td>
                                    </tr>
                                    <tr>
                                        <td style="width:15%;">
                                          <input type="number" required="required" class="form-control" t-att-name="'%s-%s' % (line.id, 'hoogteWebshop')"/>
                                        </td>
                                        <td style="width:15%;">
                                          <input type="number" required="required" class="form-control" t-att-name="'%s-%s' % (line.id, 'breedteWebshop')"/>
                                        </td>
                                        <td style="width:9%;">
                                          <input type="checkbox" class="form-control" t-att-name="'%s-%s' % (line.id, 'linksWebshop')"/>
                                        </td>
                                        <td style="width:9%;">
                                          <input type="checkbox" class="form-control" t-att-name="'%s-%s' % (line.id, 'rechtsWebshop')"/>
                                        </td>
                                        <td style="width:9%;">
                                          <input type="checkbox" class="form-control" t-att-name="'%s-%s' % (line.id, 'bovenWebshop')"/>
                                        </td>
                                        <td style="width:9%;">
                                          <input type="checkbox" class="form-control" t-att-name="'%s-%s' % (line.id, 'onderWebshop')"/>
                                        </td>
                                        <td style="width:15%;">
                                          <input type="text" class="form-control" t-att-name="'%s-%s' % (line.id, 'boringenWebshop')"/>
                                        </td>
                                        <td style="width:20%;">
                                          <input type="text" class="form-control" t-att-name="'%s-%s' % (line.id, 'opmerkingenWebshop')"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                          </div>
                        </div>
                        <input type="submit" class='btn btn-primary pull-right' value='Bevestigen'/>
                    </form>
                  </div>
                </div>
              </div>
            </t>
        </template>


	<!--Extra menu item sales -->
        <record id="action_color_picker" model="ir.actions.act_window">
            <field name="name">Kleuren</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order.colorpicker</field>
            <field name="view_type">form</field>
            <field name="view_id" ref=""/>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem id="menu_our_colors"
                action="action_color_picker" parent="base.menu_sales"
                sequence="14"/>
       <record id="view_kleuren_form" model="ir.ui.view">
            <field name="name">sale.order.colorpicker.form</field>
            <field name="model">sale.order.colorpicker</field>
            <field name="arch" type="xml">
                <form string="Onze kleuren">
			<group>
				<field name="name"/>
				<field name="website_publish"/>
			</group>
                </form>
            </field>
        </record>
       <record id="view_kleuren_tree" model="ir.ui.view">
            <field name="name">sale.order.colorpicker.tree</field>
            <field name="model">sale.order.colorpicker</field>
            <field name="arch" type="xml">
                <tree string="Onze kleuren">
				<field name="name"/>
				<field name="website_publish"/>
                </tree>
            </field>
        </record>

	<!--Extra menu item for finishing -->
        <record id="action_finishing_picker" model="ir.actions.act_window">
            <field name="name">Afwerking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order.finishing</field>
            <field name="view_type">form</field>
            <field name="view_id" ref=""/>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem id="menu_our_finishing"
                action="action_finishing_picker" parent="base.menu_sales"
                sequence="14"/>
       <record id="view_kleuren_form" model="ir.ui.view">
            <field name="name">sale.order.finishing.form</field>
            <field name="model">sale.order.finishing</field>
            <field name="arch" type="xml">
                <form string="Onze afwerkingen">
			<group>
				<field name="name"/>
				<field name="website_publish"/>
			</group>
                </form>
            </field>
        </record>
       <record id="view_finishing_tree" model="ir.ui.view">
            <field name="name">sale.order.finishing.tree</field>
            <field name="model">sale.order.finishing</field>
            <field name="arch" type="xml">
                <tree string="Onze afwerkingen">
				<field name="name"/>
				<field name="website_publish"/>
                </tree>
            </field>
        </record>
        
        <!-- Inherit product view -->
        <record id="product.product_template_only_form_view_inherit" model="ir.ui.view">
            <field name="name">product.template.product.inherit</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">
              <xpath expr="//field[@name='description']" position="before">
		<group>
                  <field name="afwerkingpickerProduct"/>
		</group>
              </xpath>
            </field>
        </record>

        <template id="validator_js" inherit_id="website.assets_frontend">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.13.1/additional-methods.min.js" />
            </xpath> 
        </template>
    </data>
</openerp>
